-*- text -*-

This directory contains tarballs of Linux sysfs hierarchies collected on
various systems.  Each `xyz.test` describes a single test with its source
topology, expected output and lstopo options.

Together with the `HWLOC_FSROOT' environment variable, these are
used by `test-topology.sh' to check for any regression introduced in
hwloc detection logic.

The `xyz.test' file should contain:
- source: xyz.tar.bz2
  Tarball filename, must be in same directory as xyz.test).
- target: xyz.console or xyz.xml
  Expected output filename (must be in same directory as xyz.test).
- options: lstopo options
  Default is `-v -'. Optional.
- exclude: exclude file
  To be passed to tar --exclude-from=<file>. Optional.
- env: environment variable line to be sourced.
  Optional. Multiple env lines are possible.

`exclude' and `env' are especially useful when the same tarball should be
used for different tests with different configurations and thus different
expected outputs, without having to save multiple copies of the tarball.

XML output filenames should end with .xml instead of .console
so that the lstopo output automatically switches to XML.

A new topology may be added by:
* Running "hwloc-gather-topology" on the target system and saving the
  tarball and output files here.
* If lstopo is not available/working on the target system, running "lstopo -v -"
  or "lstopo -.xml" on the extracted tarball to generate the corresponding
  output file locally.
* Creating a test file describing the source, output, options, etc
  as explained above.
* Adding the test, tarball and output files to Makefile.am so that they
  are properly handled in "make check" and "make dist".
